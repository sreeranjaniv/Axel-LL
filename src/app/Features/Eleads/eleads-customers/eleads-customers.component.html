<app-header></app-header>
<ng4-loading-spinner></ng4-loading-spinner>
<div class="container-fluid" style="position: fixed;">
    <div class="row">
       <div class="col-lg-12 p-0">
            <div class = "Nrep2_bg">
                <div class="row">
                    <div class="col-lg-1">
                        <div *ngIf=" this.globalVarComponent.g_SideMenuItemCount > 1">
                            <a (click)="PreviousUrl()" style="cursor: pointer;font-size: medium;" class="link-light">Back</a>
                          </div>
                    </div>
                    <div class="col-lg-1"></div>

                    <div class="col-lg-2">
                        <div class="NR_dropdwn">
                            <select class="form-select" [(ngModel)]="SelectStore" (change)="storeChange($event.target.value)" >
                                <option value="">Select Store</option>
                                <option *ngFor="let x of StoreList" value="{{x.DMS_ID}}">{{x.AS_DEALERNAME}}</option>
                                                           
                            </select>
                        </div>
                    </div> 
                    <div class="col-lg-2">
                        <div class="date">
                            <div class="md-form">
                              <input type="date" name="Date" [ngModel]="startDate | date:'yyyy-MM-dd'" 
                              [max]=getToday() (ngModelChange)="updatedate($event)" class="datepicker">
                            </div>
                          </div>
                    </div> 
                    <div class="col-lg-3">
                        <input type="search" placeholder="Search by Customer ID" class="form-control" name="search"  [(ngModel)]="SelectedCstID" style = "line-height:1; font-size: 0.8rem;width: 75%;float: right;" > 
                   </div>
                   <div class="col-lg-2" >
                        <button (click)="searchById(SelectedCstID)"type="submit" class="gobutton" >Go</button>
                   </div>
 
                </div>

                <div class="row">
                    <div class="col-lg-12 p-0">
                        <div class="Nrep_Deal">
                            <div class="nr_curve scroll_deals">
                                <table class="table-fixed">
                                    <thead>
                                        <tr>
                                           
                                            <th class="_ttl" style="width: 15%;">OPPORTUNITY ID</th>
                                            <th style="width: 1%;"></th>
                                            <th class="_ttl" >Customer ID</th>
                                            <th style="width: 1%;"></th>
                                            <th class="_ttl">ISBUSINESS</th>
                                            <th style="width: 1%;"></th>
                                            <th class="_ttl">BUSINESS NAME</th>
                                            <th style="width: 1%;"></th>
                                            <th class="_ttl">BUSINESS CONTACT</th>
                                            <th style="width: 1%;"></th>
                                            <th class="_ttl">TITLE</th>
                                            <th style="width: 1%;"></th>
                                            <th class="_ttl">firstname</th>
                                            <th style="width: 1%;"></th>
                                            <th class="_ttl">middlename</th>
                                            <th style="width: 1%;"></th>                                        
                                            <th class="_ttl">lastname</th>
                                            <th style="width: 1%;"></th>
                                            <th class="_ttl">nickname</th>
                                            <th style="width: 1%;"></th>
                                            <th class="_ttl">birthday</th>
                                            <th style="width: 1%;"></th>
                                            <th class="_ttl">Address Line 1</th>
                                            <th style="width: 1%;"></th>
                                            <th class="_ttl">Address Line 2</th>
                                            <th style="width: 1%;"></th>
                                            <th class="_ttl">City</th>
                                            <th style="width: 1%;"></th>
                                            <th class="_ttl">state</th>
                                            <th style="width: 1%;"></th>
                                            <th class="_ttl">zip</th>
                                            <th style="width: 1%;"></th>
                                            <th class="_ttl">Country</th>
                                            <th style="width: 1%;"></th>
                                            <th class="_ttl">COUNTY</th>
                                            <th style="width: 1%;"></th>
                                            <th class="_ttl">DONOTMAIL</th>
                                            <th style="width: 1%;"></th>
                                            <th class="_ttl">ISPREFERRED</th>
                                            <th style="width: 1%;"></th>
                                            <th class="_ttl">OPPTS ID</th>
                                            <th style="width: 1%;"></th>
                                           

                                        </tr>    
                                    </thead>
                                    <tbody>
                                       
                                              <tr *ngFor ="let item of GridData; let ioe = index;">
                                                
                                                <td [ngClass]="{'odd': ioe%2 == 0, 'even': ioe%2 > 0 }" >{{(item.C_OPPORTUNITY_ID == "" ? '--' : (item.C_OPPORTUNITY_ID == null ? '--':item.C_OPPORTUNITY_ID))}}</td>
                                                <td style="background: transparent !important;"></td>
                                                <td [ngClass]="{'odd': ioe%2 == 0, 'even': ioe%2 > 0 }" (click)="OpenModal(item)" data-toggle="modal" data-target="#modelId" style="cursor: pointer;">{{(item.C_CUST_ID == "" ? '--' : (item.C_CUST_ID == null ? '--':item.C_CUST_ID))}}</td>
                                                <td style="background: transparent !important;"></td>
                                                <td [ngClass]="{'odd': ioe%2 == 0, 'even': ioe%2 > 0 }">{{(item.C_ISBUSINESS == "" ? '--' : (item.C_ISBUSINESS == null ? '--':item.C_ISBUSINESS ))}}</td>
                                                <td style="background: transparent !important;"></td>
                                                <td [ngClass]="{'odd': ioe%2 == 0, 'even': ioe%2 > 0 }">{{(item.C_BUSINESSNAME == "" ? '--' : (item.C_BUSINESSNAME == null ? '--':item.C_BUSINESSNAME))}}</td>
                                                <td style="background: transparent !important;"></td>
                                                <td [ngClass]="{'odd': ioe%2 == 0, 'even': ioe%2 > 0 }">{{(item.C_BUSINESSCONTACT == "" ? '--' : (item.C_BUSINESSCONTACT == null ? '--':item.C_BUSINESSCONTACT))}}</td>
                                                <td style="background: transparent !important;"></td>
                                                <td [ngClass]="{'odd': ioe%2 == 0, 'even': ioe%2 > 0 }">{{(item.C_TITLE == "" ? '--' : (item.C_TITLE == null ? '--':item.C_TITLE))}}</td>
                                                <td style="background: transparent !important;"></td>
                                                <td [ngClass]="{'odd': ioe%2 == 0, 'even': ioe%2 > 0 }">{{(item.C_FIRSTNAME == "" ? '--' : (item.C_FIRSTNAME == null ? '--':item.C_FIRSTNAME))}}</td>
                                                <td style="background: transparent !important;"></td>
                                                <td [ngClass]="{'odd': ioe%2 == 0, 'even': ioe%2 > 0 }">{{(item.C_MIDDLENAME == "" ? '--' : (item.C_MIDDLENAME == null ? '--':item.C_MIDDLENAME))}}</td>
                                                <td style="background: transparent !important;"></td>
                                                <td [ngClass]="{'odd': ioe%2 == 0, 'even': ioe%2 > 0 }">{{(item.C_LASTNAME == "" ? '--' : (item.C_LASTNAME == null ? '--':item.C_LASTNAME))}}</td>
                                                <td style="background: transparent !important;"></td>
                                                <td [ngClass]="{'odd': ioe%2 == 0, 'even': ioe%2 > 0 }">{{(item.C_NICKNAME == "" ? '--' : (item.C_NICKNAME == null ? '--':item.C_NICKNAME))}}</td>
                                                <td style="background: transparent !important;"></td>
                                                <td [ngClass]="{'odd': ioe%2 == 0, 'even': ioe%2 > 0 }">{{(item.C_BIRTHDAY == "" ? '--' : (item.C_BIRTHDAY == null ? '--':item.C_BIRTHDAY))}}</td>
                                                <td style="background: transparent !important;"></td>
                                                <td [ngClass]="{'odd': ioe%2 == 0, 'even': ioe%2 > 0 }">{{(item.C_ADDRESSLINE1 == "" ? '--' : (item.C_ADDRESSLINE1 == null ? '--':item.C_ADDRESSLINE1))}}</td>
                                                <td style="background: transparent !important;"></td>
                                                <td [ngClass]="{'odd': ioe%2 == 0, 'even': ioe%2 > 0 }">{{(item.C_ADDRESSLINE2 == "" ? '--' : (item.C_ADDRESSLINE2 == null ? '--':item.C_ADDRESSLINE2))}}</td>
                                                <td style="background: transparent !important;"></td>
                                                <td [ngClass]="{'odd': ioe%2 == 0, 'even': ioe%2 > 0 }">{{(item.C_CITY == "" ? '--' : (item.C_CITY == null ? '--':item.C_CITY))}}</td>
                                                <td style="background: transparent !important;"></td>
                                                <td [ngClass]="{'odd': ioe%2 == 0, 'even': ioe%2 > 0 }">{{(item.C_STATE == "" ? '--' : (item.C_STATE == null ? '--':item.C_STATE))}}</td>
                                                <td style="background: transparent !important;"></td>
                                                <td [ngClass]="{'odd': ioe%2 == 0, 'even': ioe%2 > 0 }">{{(item.C_ZIP == "" ? '--' : (item.C_ZIP == null ? '--':item.C_ZIP))}}</td>
                                                <td style="background: transparent !important;"></td>
                                                <td [ngClass]="{'odd': ioe%2 == 0, 'even': ioe%2 > 0 }">{{(item.C_COUNTRY == "" ? '--' : (item.C_COUNTRY == null ? '--':item.C_COUNTRY))}}</td>
                                                <td style="background: transparent !important;"></td>
                                                <td [ngClass]="{'odd': ioe%2 == 0, 'even': ioe%2 > 0 }">{{(item.C_COUNTY == "" ? '--' : (item.C_COUNTY == null ? '--':item.C_COUNTY))}}</td>
                                                <td style="background: transparent !important;"></td>
                                                <td [ngClass]="{'odd': ioe%2 == 0, 'even': ioe%2 > 0 }">{{(item.C_DONOTMAIL == "" ? '--' : (item.C_DONOTMAIL == null ? '--':item.C_DONOTMAIL))}}</td>
                                                <td style="background: transparent !important;"></td>
                                                <td [ngClass]="{'odd': ioe%2 == 0, 'even': ioe%2 > 0 }">{{(item.C_ISPREFERRED == "" ? '--' : (item.C_ISPREFERRED == null ? '--':item.C_ISPREFERRED))}}</td>
                                                <td style="background: transparent !important;"></td>
                                                <td [ngClass]="{'odd': ioe%2 == 0, 'even': ioe%2 > 0 }">{{(item.C_OPPTS_ID == "" ? '--' : (item.C_OPPTS_ID == null ? '--':item.C_OPPTS_ID))}}</td>
                                                <td style="background: transparent !important;"></td>
                                            
                                               
                                            </tr> 
                                            <!-- <tr *ngIf="SelectStore == '' && SelectPosition == ''">
                                                <td colspan="15" style="text-align:center;color:black;font-size: 14px;border-bottom: none;">Select Store</td>
                                            </tr> -->
                                            <tr *ngIf="ELeadsData1">
                                                <td colspan="15" style="text-align:center;color:black;font-size: 14px;border-bottom: none;">No Data Found</td>
                                            </tr>  
                                        
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
             
                <div class="row" class="viewmore">
                    <div *ngIf="GridData.length != count"> 
                        <div  class="d-flex justify-content-center" >
                            <button style="background-color: #0d6efd;border: none;" type="button" class="btn btn-primary btn-sm"
                                (click)="ViewMore()">View More</button>
                        </div>
                     </div>
                    </div> 
            </div>
        </div>
    </div>
</div>


<div *ngIf="ShowModal">
    <div class="modal" tabindex="-1" role="dialog" #modal  id="modelId">
     <div class="modal-dialog" role="document" style="min-width: 1000px;">
       <div class="modal-content">
         <div class="modal-header">
             <ul>
                <h5 class="modal-title">{{SelectStoreName}}</h5>
                <h6 class="modal-title">CUSTOMER ID: {{SelectedItem_ID}}</h6>
             </ul>
           <button  type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button>
         </div>
         <div class="modal-body" style="padding: 2rem;">
            <div class="row ">
                <div class="button2 ">
                    <ul >
                        <li><a  style="cursor: pointer;"  [ngClass]="{'active': TabChange === '1'}" (click)="TabClick('1')" >PHONES</a></li>
                        <li><a style="cursor: pointer;"  [ngClass]="{'active': TabChange === '2'}" (click)="TabClick('2')">EMAILS</a></li>
                        <li><a  style="cursor: pointer;"   [ngClass]="{'active': TabChange === '3'}"  (click)="TabClick('3')" >PRIVARCY SETTINGS</a></li>
                        <li><a  style="cursor: pointer;"  [ngClass]="{'active': TabChange === '4'}" (click)="TabClick('4')" >LINKS</a></li>
                        <li><a  style="cursor: pointer;"  [ngClass]="{'active': TabChange === '5'}" (click)="TabClick('5')" >LAST ACTIVITIES </a></li>
                      </ul>
                </div>
              </div>
            
              <div class="row" style="margin-top: 25px;max-width: 1500px;overflow: auto;max-height: 472px;">
              <table class="Subtables" *ngIf ="SubTabledata.length > 0">
                <thead  style="background-color: #85a7a9;text-transform: uppercase;">
                   <th  *ngFor = 'let key of keys'>{{key}}</th>
                 </thead>
                 <tbody>
                         <tr *ngFor="let item of SubTabledata">
                          <td  *ngFor = 'let key of keys'>{{(item[key] == "" ? '-' : (item[key] == null ? '-':item[key]))}}</td>
                         
                         </tr> 
                 </tbody>
                 </table>
                 <label *ngIf = "SubTabledata.length == 0" style="text-align: center;"> No Data Found</label>
        </div>
    </div>
       </div>
     </div>
   </div>
  </div>


